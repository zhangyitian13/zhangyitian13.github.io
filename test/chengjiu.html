<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8" >
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
		<title>展示页面</title>
		<script language="JavaScript" src="js/jquery.js">
		</script>
		<style>
			html{
			height: 100%;
			}
			body{
			height: 96%;
			overflow:hidden;
			}
			.bigcontainer{
			width: 100%;
			height: 100%;
			}
			#box1{
			width: 95%;
			height: 18.75%;
			overflow:hidden;
			-webkit-border-radius: 10px;
            -moz-border-radius: 10px;
			border:solid 1px;
			}
			#box2{
			width: 95%;
			height: 12%;
			overflow:hidden;
			
			}
			#box3{
			width: 89%;
			height: 62%;
			overflow-x:hidden;
			-webkit-border-radius: 10px;
            -moz-border-radius: 10px;
			border:solid 1px;
			padding:3%;
			}
			#leftbutton{
			width: 11.1%;
			height: 100%;
			position: absolute;
			top: 0%;
			left: 0%;
			}
			
			#middlebar{
			width: 77.7%;
			height: 100%;
			position: absolute;
			top: 0%;
			left: 11.1%;
			}
			
			#rightbutton{
			width: 11.1%;
			height: 100%;
			position: absolute;
			top: 0%;
			left: 88.8%;
			}
			
			#namediv{
			width:45%;
			position: relative;
			left:52%;
			top:-60%;
			background-color:#66CCFF;
			-webkit-border-radius: 10px;
            -moz-border-radius: 10px;
			}
			

			.test1{
			padding: 0;
			margin: 0;
			font-size: 4vw;
			position: relative;
			left: 35%;
			}
			
			.test2{
			padding: 0;
			margin: 0;
			font-size: 5vw;
			position: relative;
			left: 20%;
			top: 10%;
			}
			
			.test3{
			padding: 0;
			margin: 0;
			font-size: 5.5vw;
			position: relative;
			left: 45%;
			}
			
			.test4{
			padding: 0;
			margin: 0;
			font-size: 5vw;
			position: relative;
			left: 12%;
			top: 10%;
			}
			
			.test5{
			padding: 0;
			margin: 0;
			font-size: 5vw;
			position: relative;
			left: 12%;
			top: 10%;
			}
			
			.test6{
			padding: 0;
			margin: 0;
			font-size: 7vw;
			position: relative;
			left: 12%;
			top: 10%;
			}
			
			.leftarrow{
			width:100%;
			height: 100%;
			}
			
			.tou{
			height:100%;
			width:auto;
			}
			
			.toucontainer{
			width:27.77%;
			height:83.3%;
			position:relative;
			top:10%;
			left:15%;
			}
			.divachieve1{
			width:30%;
			height:83.3%;
			position:relative;
			top:7%;
			left:1%;
			}
			.divachieve2{
			width:30%;
			height:83.3%;
			position:relative;
			top:-78%;
			left:34%;
			}
			.divachieve3{
			width:30%;
			height:83.3%;
			position:relative;
			top:-160%;
			left:67%;
			}
			.divchengjiu{
			width:94%;
			height:21%;
			margin:3%;
			border: solid 1px #666666;
			-webkit-border-radius: 10px;
            -moz-border-radius: 10px;
			overflow: hidden;
			background-color:#D4FBFF;
			}
			.divchengjiuimg{
			width:20%;
			height:84%;
			position:relative;
			margin:2%;
			left:1%;
			border: solid 1px rgba(81, 203, 238, 1);
			overflow:hidden;
			box-shadow: 0 0 10px #FFD700; 
			-webkit-box-shadow: 0 0 10px #FFD700; 
			-moz-box-shadow: 0 0 10px #FFD700;
			}
			.achieveimg{
			height:100%;
			width:100%;
			}
			.achieveimg2{
			width:100%;
			height:auto;
			}
			.achieveimg3{
			height:100%;
			width:auto;
			}
			.backimg{
			width:100%;
			height:auto;
			}
			.div_text_1{
			width:70%;
			height:35%;
			position:relative;
			border: solid 1px;
			left:25%;
			top:-95%;
			}
			.div_text_2{
			width:70%;
			height:35%;
			position:relative;
			border: solid 1px;
			left:25%;
			top:-85%;
			}
			.divshow{
			position:absolute;
			width:100%;
			height:50%;
			overflow:hidden;
			left:0%;
			}
			.divshowimg{
			position:relative;
			width:50%;
			left:25%;
			}
			.divbackimg1{
			position:relative;
			width:50%;
			left:25%;
			top:-68%;
			filter:Alpha(opacity=50); 
			-moz-opacity:5;
			opacity:0.5;
			display:none;
			}
			.divbackimg2{
			position:relative;
			width:50%;
			left:25%;
			top:-68%;
			filter:Alpha(opacity=50); 
			-moz-opacity:5;
			opacity:0.5;
			display:none;
			}
			.divbackimg3{
			position:relative;
			width:50%;
			left:25%;
			top:-68%;
			filter:Alpha(opacity=50); 
			-moz-opacity:5;
			opacity:0.5;
			display:none;
			}
			.divword{
			position:absolute;
			width:70%;
			height:18%;
			left:28%;
			top:32%;
			background-color:#68EE68;
			display:none;
			opacity:0;
			}
			.divlight{
			position:absolute;
			width:70%;
			height:18%;
			left:28%;
			top:32%;
			display:none;
			overflow:hidden;
			}
			.lightcontainer{
			position:relative;
			height:100%;
			left:0%;
			opacity:0.65;
			}
			.lightimg{
			height:100%;
			width:auto;
			}
		</style>
	</head>
	<body>
		<div class = "bigcontainer">
			<div id = "box1">
				<div id = "toucontainer" class = "toucontainer">
					<img src="src/tou.jpg" class = "tou"/>
				</div>
				<div id = "namediv">
					<p class="test2">萌杰--Lv10</p>
					<p class="test2">已完成20/20</p>
				</div>
			</div>
			
			<div id = "box2">
				<div id = "achieve1" class = "divachieve1">
					<p class="test2">运动成就</p>
					<p class="test2">6/6</p>
				</div>
				<div id = "achieve2" class = "divachieve2">
					<p class="test2">睡眠成就</p>
					<p class="test2">0/6</p>
				</div>
				<div id = "achieve3" class = "divachieve3">
					<p class="test2">堕落成就</p>
					<p class="test2">10/10</p>
				</div>
			</div>
		
			<div id = "box3">
				<div class = "divchengjiu">
					<div class = "divchengjiuimg">
						<img src = "src/jiangbei.jpg" class = "achieveimg"/>
					</div>
					<div class = "div_text_1">
						<p class = "test4">一日五觉\n</p>
					</div>
					<div class = "div_text_2">
						<p class = "test5">每天睡五次\n</p>
					</div>
				</div>
				<div class = "divchengjiu">
					
				</div>
				<div class = "divchengjiu">
					
				</div>
				<div class = "divchengjiu">
					
				</div>
			</div>
		</div>
	</body>
</html>
<script language = "javascript">
	var timedelay = 50;
	var timer = 0;
	var m_loop;
	var m_loop2;
	var m_loop3;
	var m_loop4;
	var m_loop5;
	var m_loop6;
	var m_loop7;
	var temp = 94;
	var temp2 = 0;
	var objshow;
	var num;
	var obj1 = [{imgsrc:'src/shu.jpg',achievename:'外星飞机王',achievetext:'持续撸管6小时',isnew:'0'},{imgsrc:'src/shu.jpg',achievename:'外星飞机霸',achievetext:'持续撸管8小时',isnew:'0'},{imgsrc:'src/shu.jpg',achievename:'外星飞机帝',achievetext:'持续撸管10小时',isnew:'0'},{imgsrc:'src/chengjiu/07.jpg',achievename:'小花花',achievetext:'蜀都赋离开范德萨',isnew:'1'},{imgsrc:'src/shu.jpg',achievename:'外星飞机帝',achievetext:'持续撸管12小时',isnew:'0'},{imgsrc:'src/jiangbei.jpg',achievename:'萌杰',achievetext:'撸出血',isnew:'1'}]
	var obj2 = {username:'萌杰',userlevel:'10',text1:'19/20',text2:'5/5',text3:'5/6',text4:'9/9',imgsrc:'src/tou.jpg'};
	function mode1(){
		document.getElementById('achieve1').style.textShadow = "1px 0 0 #FFD700, 0 1px 0 #FFD700, 0 -1px 0 #FFD700, -1px 0 0 #FFD700, 1px 0 1px #FFD700, 0 1px 1px #FFD700, 0 -1px 1px #FFD700, -1px 0 1px #FFD700";
		document.getElementById('achieve2').style.textShadow = "";
		document.getElementById('achieve3').style.textShadow = "";
	}
	function mode2(){
		document.getElementById('achieve2').style.textShadow = "1px 0 0 #FFD700, 0 1px 0 #FFD700, 0 -1px 0 #FFD700, -1px 0 0 #FFD700, 1px 0 1px #FFD700, 0 1px 1px #FFD700, 0 -1px 1px #FFD700, -1px 0 1px #FFD700";
		document.getElementById('achieve1').style.textShadow = "";
		document.getElementById('achieve3').style.textShadow = "";
	}
	function mode3(){
		document.getElementById('achieve3').style.textShadow = "1px 0 0 #FFD700, 0 1px 0 #FFD700, 0 -1px 0 #FFD700, -1px 0 0 #FFD700, 1px 0 1px #FFD700, 0 1px 1px #FFD700, 0 -1px 1px #FFD700, -1px 0 1px #FFD700";
		document.getElementById('achieve2').style.textShadow = "";
		document.getElementById('achieve1').style.textShadow = "";
	}
	mode1();
	getinfo(obj2);//you should delete this line after your work\n
	
	//getmode1(obj1);//just for fun\n
	
	//you should modify these '???'\n
	//$.ajax({
	//		url: '???',
	//		type: 'POST',
	//		datatype: 'json',
	//		data: {
	//			number: 0,
	//			csrfmiddlewaretoken: '???'
	//		},
	//		success: getinfo(),
	//		error: function (xhr, errmsg, err) {
	//			alert('debug2');
	//			alert(xhr.status + ': ' + xhr.responseText);
	//		}
	//	})
	function getmode1(json) {
		document.getElementById('box3').innerHTML="";
		num = 0;
		a = new Array();
        for (i in json){
			str = "<div class = 'divchengjiu'><div class = 'divchengjiuimg'><img src = "+json[i].imgsrc
			+" class = 'achieveimg'/></div><div class = 'div_text_1'><p class = 'test4'>"+json[i].achievename
			+"</p></div><div class = 'div_text_2'><p class = 'test5'>"+json[i].achievetext+"</p></div></div>";
            $('#box3').append(str);
        }
		for (i in json){
			if (json[i].isnew == 0)
				continue;
			a[num] = i;
			num++;
			setTimeout(function(){showachievement(json[a[num]])},timer);
			timer+=12.5*1000;
		}
		timer = 0;
		num = 0;
		setTimeout(function(){num = 0},timer+12500);
    }
	function getinfo(json){
		document.getElementById('namediv').innerHTML="";
		str = "<p class='test2'>"+json.username+"--Lv"+json.userlevel+"</p><p class='test2'>已完成"+json.text1+"</p>"
		$('#namediv').append(str);
		document.getElementById('achieve1').innerHTML="";
		str = "<p class='test2'>运动成就</p><p class='test2'>"+json.text2+"</p>";
		$('#achieve1').append(str);
		document.getElementById('achieve2').innerHTML="";
		str = "<p class='test2'>睡眠成就</p><p class='test2'>"+json.text3+"</p>";
		$('#achieve2').append(str);
		document.getElementById('achieve3').innerHTML="";
		str = "<p class='test2'>堕落成就</p><p class='test2'>"+json.text4+"</p>";
		$('#achieve3').append(str);
		document.getElementById('toucontainer').innerHTML="";
		str = "<img src="+json.imgsrc+" class = 'tou'/>";
		$('#toucontainer').append(str);
	}
	$('#achieve1').click(function(){
		mode1();
		$.ajax({
			url: '???',
			type: 'POST',
			datatype: 'json',
			data: {
				number: 1,
				csrfmiddlewaretoken: '???'
			},
			success: getmode1(),
			error: function (xhr, errmsg, err) {
				alert('debug1');
				alert(xhr.status + ': ' + xhr.responseText);
			}
		})
	})
	$('#achieve2').click(function(){
		mode2();
		$.ajax({
			url: '???',
			type: 'POST',
			datatype: 'json',
			data: {
				number: 2,
				csrfmiddlewaretoken: '???'
			},
			success: getmode1(),
			error: function (xhr, errmsg, err) {
				alert('debug2');
				alert(xhr.status + ': ' + xhr.responseText);
			}
		})
	})
	$('#achieve3').click(function(){
		mode3();
		$.ajax({
			url: '???',
			type: 'POST',
			datatype: 'json',
			data: {
				number: 3,
				csrfmiddlewaretoken: '???'
			},
			success: getmode1(),
			error: function (xhr, errmsg, err) {
				alert('debug3');
				alert(xhr.status + ': ' + xhr.responseText);
			}
		})
	})
	function showachievement(obj){
		document.getElementById("box3").innerHTML+= "<div id = 'divshow' class = 'divshow'><div id = 'divshowimg' class = 'divshowimg'><img src = '"+obj.imgsrc+"' class = 'achieveimg2'/></div></div>";
		document.getElementById("box3").innerHTML+= "<div id = 'divword' class = 'divword'><p class = 'test6'>获得成就："+obj.achievename+"</p></div>"
		document.getElementById("box3").innerHTML+= "<div id = 'divlight' class = 'divlight'><div id = 'lightcontainer' class = 'lightcontainer'><img src = 'src/light.png' class = 'lightimg'/></div></div>"
		document.getElementById("divshow").innerHTML += "<div id = 'divbackimg1' class = 'divbackimg1'><img src = 'src/test1.png' class = 'backimg'/></div>";
		document.getElementById("divshow").innerHTML += "<div id = 'divbackimg2' class = 'divbackimg2'><img src = 'src/test2.png' class = 'backimg'/></div>";
		document.getElementById("divshow").innerHTML += "<div id = 'divbackimg3' class = 'divbackimg3'><img src = 'src/test3.png' class = 'backimg'/></div>";
		m_loop = setInterval("uptheshow()",timedelay);
		m_loop2 =setInterval("changebackimg()",300);
		num++;
	}
	
	function uptheshow(){
		temp-= 2;
		if (temp < 20){
			clearInterval(m_loop);
			temp = 0;
			m_loop3 = setInterval("getsmall()",timedelay);
			return;
		}
		document.getElementById('divshow').style.top = temp+"%";
	}
	function getsmall(){
		if (temp >= 25){
			clearInterval(m_loop3);
			temp = 0;
			document.getElementById('divword').style.display = "block";
			m_loop5 = setInterval("wordshow()",timedelay);
			return;
		}
		temp++;
		document.getElementById('divshowimg').style.left = 25-0.9*temp+"%";
		document.getElementById('divbackimg1').style.left = 25-0.9*temp+"%";
		document.getElementById('divbackimg2').style.left = 25-0.9*temp+"%";
		document.getElementById('divbackimg3').style.left = 25-0.9*temp+"%";
		document.getElementById('divshowimg').style.width = 50-temp+"%";
		document.getElementById('divbackimg1').style.width = 50-temp+"%";
		document.getElementById('divbackimg2').style.width = 50-temp+"%";
		document.getElementById('divbackimg3').style.width = 50-temp+"%";
		document.getElementById('divshowimg').style.top = temp+"%";
		document.getElementById('divbackimg1').style.top = -68+2.3*temp+"%";
		document.getElementById('divbackimg2').style.top = -68+2.3*temp+"%";
		document.getElementById('divbackimg3').style.top = -68+2.3*temp+"%";
	}
	function wordshow(){
		temp+=2.5;
		if (temp >= 120){
			clearInterval(m_loop5);
			temp = 0;
			m_loop6 = setInterval("wordshine()",timedelay);
			document.getElementById('divlight').style.display = "block";
			return;
		}
		document.getElementById('divword').style.opacity = temp/100;
	}
	function wordshine(){
		temp++;
		if (temp > 50){
			clearInterval(m_loop6);
			temp = 0;
			m_loop7 = setInterval("worddisappear()",timedelay);
			document.getElementById('divlight').style.display = "none";
			document.getElementById('lightcontainer').style.left = "0%";
			return;
		}
		document.getElementById('lightcontainer').style.left = 6*temp+"%";
	}
	function worddisappear(){
	var dom
		temp+=2.5;
		if (temp >= 100){
			dom = document.getElementById("divshow");
			dom.parentNode.removeChild(dom);
			temp = 94;
			clearInterval(m_loop2);
			clearInterval(m_loop7);
			dom = document.getElementById("divword");
			dom.parentNode.removeChild(dom);
			dom = document.getElementById("divlight");
			dom.parentNode.removeChild(dom);
			return;
		}
		document.getElementById('divshow').style.opacity = 1 - temp/100;
		document.getElementById('divword').style.opacity = 1 - temp/100;
	}
	function changebackimg(){
		temp2++;
		if (temp2 % 3 == 0){
			document.getElementById("divbackimg1").style.display = "block";	
			document.getElementById("divbackimg2").style.display = "none";	
			document.getElementById("divbackimg3").style.display = "none";	
		}
		else if (temp2 % 3 == 1){
			document.getElementById("divbackimg1").style.display = "none";	
			document.getElementById("divbackimg2").style.display = "block";	
			document.getElementById("divbackimg3").style.display = "none";	
		}
		else if (temp2 % 3 == 2){
			document.getElementById("divbackimg1").style.display = "none";	
			document.getElementById("divbackimg2").style.display = "none";	
			document.getElementById("divbackimg3").style.display = "block";	
		}
		if (temp2 >= 200000){
			clearInterval(m_loop2);
		}
	}
	setTimeout("getmode1(obj1)",3000);
	
</script>

