<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8" >
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
		<title>展示页面</title>
		<script language="JavaScript" src="js/jquery.js">
		</script>
		<script language="JavaScript" src="js/jquery.raty.js">
		</script>
		<link rel="stylesheet" href="js/jquery.raty.css">
		<style>
			html{
			height: 100%;
			}
			body{
			height: 99%;
			}
			.bigcontainer{
			width: 100%;
			height: 100%;
			}
			#box1{
			border: 1px solid red;
			width: 100%;
			height: 6.25%;
			position: relative;
			overflow:hidden;
			}
			#box2{
			border: 1px solid red;
			width: 100%;
			height: 18.75%;
			overflow:hidden;
			}
			#box3{
			border: 1px solid red;
			width: 100%;
			height: 31.25%;
			overflow:hidden;
			}
			#box4{
			border: 1px solid red;
			width: 100%;
			height: 31.25%;
			overflow:hidden;
			}
			#box5{
			border: 1px solid red;
			width: 100%;
			height: 12.5%;
			overflow:hidden;
			}
			#leftbutton{
			padding: 1px solid red;
			width: 11.1%;
			height: 100%;
			position: absolute;
			top: 0%;
			left: 0%;
			}
			#middlebar{
			border: 1px solid red;
			width: 77.7%;
			height: 100%;
			position: absolute;
			top: 0%;
			left: 11.1%;
			}
			#rightbutton{
			padding: 1px solid red;
			width: 11.1%;
			height: 100%;
			position: absolute;
			top: 0%;
			left: 88.8%;
			}
			#namediv{
			width:40%;
			position: relative;
			left:55%;
			top:-60%;
			}
			.test1{
			padding: 0;
			margin: 0;
			font-size: 4vw;
			position: relative;
			left: 35%;
			}
			.test2{
			padding: 0;
			margin: 0;
			font-size: 4vw;
			position: relative;
			left: 0%;
			}
			.test3{
			padding: 0;
			margin: 0;
			font-size: 4vw;
			position: relative;
			left: 45%;
			}
			.leftarrow{
			width:100%;
			height: 100%;
			}
			
			.tou{
			width:100%;
			height:100%;
			}
			.toucontainer{
			width:27.77%;
			height:83.3%;
			position:relative;
			top:0%;
			left:25%;
			}
			.starbar{
			width:60%;
			height:40%;
			position:relative;
			top:0%;
			left:30%;
			overflow:hidden;
			}
			.mycanvas{
			width:90%;
			position:relative;
			left:5%;
			top:0%;
			}
			.canvasdiv{
			width:100%;
			height:60%;
			position:relative;
			top:-20%;
			}
		</style>
	</head>
	<body>
		<div class = "bigcontainer">
			<div id = "box1">
				<div id = "leftbutton">
					<img src="src/leftarrow.png" class = "leftarrow"></img>
				</div>
				<div id = "middlebar">
					<p class="test3">11.8</p>
				</div>
				<div id = "rightbutton">
					<img src="src/rightarrow.png" class = "leftarrow"></img>
				</div>
			</div>
			<div id = "box2">
				<div id = "toucontainer" class = "toucontainer">
					<img src="src/tou.jpg" class = "tou"></img>
				</div>
				<div id = "namediv">
					<p class="test2">萌杰Lv10</p>
				</div>
			</div>
			<div id = "box3">
				<p class="test1">你的得分：70</p>
				<div id = "starbar" class = "starbar">
					
				</div>
				<div id = "canvasdiv" class = "canvasdiv">
					<canvas id = "mycanvas" class = "mycanvas">
					</canvas>
				</div>
			</div>
			<div id = "box4">
				<p class="test1">睡眠分析日志</p>
			</div>
			<div id = "box5">
				<p class="test1">底部信息</p>
			</div>
		</div>
	</body>
</html>

<script>
	$("#starbar").raty({ readOnly: true, score: 3.5 });
	var sleepnum = 3;
	var sleeptime = new Array();
	var sleepstart = new Array();
	var sleepend = new Array();
	var barstart = new Array();
	var barend = new Array();
	var i;
	currenttime = "19:00";
	sleepstart[0] = "18:00";
	sleepend[0] = "20:00";
	sleepstart[1] = "23:00";
	sleepend[1] = "6:00";
	sleepstart[2] = "15:00";
	sleepend[2] = "16:00";
	barstart[0] = 0;
	barend[0] = 1/24;
	barstart[1] = 4/24;
	barend[1] = 11/24;
	barstart[2] = 20/24;
	barend[2] = 21/24;
	
	var mycanvas = document.getElementById("mycanvas");
    var context = mycanvas.getContext("2d");
	var offsetx = 30;
	var leftx = 10;
	context.lineWidth=1;
	context.beginPath();
	context.moveTo(leftx,offsetx);
	context.lineTo(300-leftx,offsetx);
	context.lineTo(300-leftx,offsetx+10);
	context.lineTo(leftx,offsetx+10);
	context.lineTo(leftx,offsetx);
	context.stroke();
	context.closePath();
	
	context = mycanvas.getContext("2d");
	context.lineWidth=1;
	context.beginPath();
	context.fillStyle="#68EE68";
	for (i = 0; i < sleepnum; i++)
	{
		context.fillRect((300-2*leftx)*barstart[i]+leftx,offsetx+1,(300-2*leftx)*(barend[i]-barstart[i]),8);
	}
	for (i = 0; i < sleepnum; i++)
	{
		context.moveTo(leftx+(300-2*leftx)*barstart[i],offsetx);
		context.lineTo(leftx+(300-2*leftx)*barstart[i],offsetx-8);
		context.moveTo(leftx+(300-2*leftx)*barend[i],offsetx+10);
		context.lineTo(leftx+(300-2*leftx)*barend[i],offsetx+18);
	}
	context.stroke();
	context.closePath(0,0);
	
	var ctx = mycanvas.getContext("2d");
    ctx.font = "1em Courier New";
    ctx.fillStyle = "blue";
	for (i = 0; i < sleepnum; i++)
	{
		ctx.fillText(sleepstart[i], (300-2*leftx)*barstart[i], offsetx-10);
		ctx.fillText(sleepend[i], (300-2*leftx)*barend[i], offsetx+28);
	}
    //ctx.fillText(sleepstart[i], (300-2*leftx)*barstart[i], offsetx-10);
	//alert("sb");
</script>